!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("el-form-schema",[],t):"object"==typeof exports?exports["el-form-schema"]=t():e["el-form-schema"]=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o={size:"mini",labelWidth:"80px",labelPosition:"right",inline:!1,componentWidth:12};var r={name:"formJsonSchemas",props:{uiSchemas:{type:Array,default:()=>[]},value:{type:Object,default:()=>{}},config:{type:Object,default:()=>{}}},computed:{formConfig(){return{...o,...this.config}}},data(){return{formData:this.mergeValues()}},render(e){const{formConfig:{labelWidth:t,labelPosition:n,inline:o}}=this;return e("el-form",{props:{model:this.formData,labelWidth:t,labelPosition:n,inline:o},ref:"formData"},[e("el-row",{},[...this.$slots.prepend||[],...this.renderFormItems(e),...this.renderButtomItems(e),...this.$slots.append||[]])])},created(){this.$emit("input",this.formData)},watch:{formData:{handler(e){this.updating=!0,this.$emit("input",e)},deep:!0}},methods:{mergeValues(){const{value:e}=this;return{...e}},renderButtomItems(e){const t=this,{formConfig:{size:n,labelWidth:o,componentWidth:r,inline:l}}=t;return[e(l?"el-col":"div",{props:{span:r}},[e("el-form-item",{props:{size:n,labelWidth:o}},[e("el-button",{props:{size:n},on:{click(){t.$refs.formData.resetFields(),t.$emit("cancel",{...t.formData})}}},"取消"),e("el-button",{props:{size:n,type:"primary"},on:{click(){t.$refs.formData.validate(e=>{if(!e)return!1;t.$emit("submit",{...t.formData})})}}},"确定")])])]},renderFormItems(e){const t=this,{formConfig:n}=t,o=[],r={"el-input":t.handleRenderCommonItems,"el-select":t.handleRenderSelect,"el-date-picker":t.handleRenderCommonItems,"el-switch":t.handleRenderCommonItems,"el-radio":t.handleRenderRadio,"el-custom":t.handleRenderCustom};return t.uiSchemas.map(t=>{if(r[t.component]){const l=e(n.inline?"el-col":"div",{props:{span:n.componentWidth}},[e("el-form-item",{props:{rules:[...t.rule||[]],label:t.label,prop:t.model}},t.render?[t.render(e,t)]:[...r[t.component](e,t)])]);o.push(l)}}),o},handleModel(e){const t=this;return{value:t.formData[e.model]||null,modelEvents:{input:function(n){t.formData[e.model]=n}}}},handleRenderCommonItems(e,t){const{modelEvents:n,value:o}=this.handleModel(t),{formConfig:{size:r}}=this;return[e(t.component,{props:{value:o,size:r,...t.props},on:{...n,...t.events}})]},handleRenderSelect(e,t){const{modelEvents:n,value:o}=this.handleModel(t);let r=this.handleRenderChildren(e,t,"el-option");const{formConfig:{size:l}}=this;return[e(t.component,{props:{value:o,size:l,...t.props},on:{...n,...t.events}},r)]},handleResetOptions(e,t){let n=[];if(Array.isArray(t.options))(t.options||[]).map(e=>{let o={};o="object"==typeof e?{type:"array",value:t.keyVal?e[t.keyVal]:e.value,label:t.labelVal?e[t.labelVal]:e.label}:{type:"base",value:e,label:e},n.push(o)});else{const e=t.options||{};for(let t in e){const o={type:"object",value:t,label:e[t]};n.push(o)}}return n},handleRenderChildren(e,t,n){let o=[];return this.handleResetOptions(e,t).map(t=>{const r={...t},l=e(n,{props:{value:r.value,label:r.label,key:r.value}});o.push(l)}),o},handleRenderRadio(e,t){const{formConfig:{size:n}}=this,{modelEvents:o,value:r}=this.handleModel(t);let l=this.handleRenderChildren(e,t,"el-radio");return[e("el-radio-group",{props:{value:r,size:n,...t.props},on:{...o,...t.events}},l)]},handleRenderCustom:(e,t)=>t.render(e,t)}};t.default={install:e=>{e.component("el-form-shema",r)}}}])}));